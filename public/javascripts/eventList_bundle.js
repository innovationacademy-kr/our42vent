(()=>{"use strict";Sentry.init({dsn:"https://93f50a72783642f2bb01edfc10a44e9f@o1134287.ingest.sentry.io/6181589"}),function(){const e=document.querySelector(".user-username");e.textContent.length>7&&(e.style.fontSize=".87em")}();const e=document.querySelector(".user-drop-button"),t=document.querySelector(".user-drop-content"),n=t.firstElementChild.nextElementSibling.firstElementChild;e.addEventListener("click",(()=>{t.classList.contains("hidden")?e.firstElementChild.style.color="var(--light_mint)":t.classList.contains("hidden")||(e.firstElementChild.style.color="var(--white)"),t.classList.toggle("hidden")})),n.addEventListener("click",(()=>sessionStorage.clear())),document.body.addEventListener("click",(n=>{e.contains(n.target)||t.contains(n.target)||t.classList.contains("hidden")||(t.classList.toggle("hidden"),e.firstElementChild.style.color="var(--white)")})),document.querySelector(".user-imageurl").addEventListener("error",(e=>{e.target.src="/assets/images/user_default.png",e.onerror=null}));const o=document.querySelector(".toggle-icon"),i=document.querySelector("nav"),l=document.querySelector("main");o.addEventListener("click",(()=>{o.classList.toggle("change"),i.classList.toggle("change")})),l.addEventListener("click",(()=>{"change".localeCompare(i.classList[0])||(o.classList.toggle("change"),i.classList.toggle("change"))}));const c=axios.create({timeout:1e4});c.interceptors.response.use((e=>e.data),(e=>("ECONNABORTED"===e?.code&&window.location.replace("/error/408"),404===e?.response?.status&&window.location.replace("/error/404"),401===e?.response?.status&&window.location.replace("/logout"),Promise.reject(e))));const a=c,r=Swal.mixin({confirmButtonColor:"#58b7ba",showConfirmButton:!0,showCancelButton:!1}),s=Swal.mixin({showCancelButton:!0,confirmButtonColor:"#58b7ba",cancelButtonColor:"#d33",confirmButtonText:"예",cancelButtonText:"아니요"});function d(e){const t=e.target.classList[0];s.fire({title:"삭제 하시겠습니까?",icon:"warning"}).then((e=>{e.isConfirmed&&a.delete(`/event/${t}`).then((()=>{r.fire({title:"삭제되었습니다!",icon:"success"}).then((()=>window.location.replace("/event/list/")))})).catch((e=>{405===e.response.status?r.fire({title:"이미 삭제된 이벤트 입니다.",icon:"error"}).then((()=>window.location.replace("/event/list"))):r.fire({title:"오류가 발생하였습니다.",icon:"error"})}))}))}function u(e){const t=e.match(/\n/g),n=t?t.length:0;return(new TextEncoder).encode(e).length+n}function y(e){const t=function(e){let t;switch(e){case"event-title":case"event-location":t=224;break;case"event-pic":t=56;break;case"event-topic":t=480;break;default:t=4064}return t}(e),n=document.getElementById(e),o=u(n.value);let i=!0;return"event-pic"!==e&&"event-details"!==e&&""===n.value?(n.setCustomValidity("비어있는 칸을 채워주세요"),i=!1):o>t?(n.setCustomValidity(`이 항목은 ${t}byte를 초과할 수 없습니다. 현재 ${o}bytes 썼습니다.`),i=!1):n.setCustomValidity(""),n.reportValidity(),i}function m(e){const t=document.getElementById(e),n=new Date(t.value),o="event-beginat"===e?"시작":"종료";let i=!0;return""===t.value?(t.setCustomValidity(`${o} 시간을 선택해주세요`),i=!1):n<new Date("1970-01-01T00:00")||n>new Date("4242-12-31T23:59")?(t.setCustomValidity(`${o} 시간은 1970년부터 4242년 사이에서 선택해주세요`),i=!1):t.setCustomValidity(""),t.reportValidity(),i}function g(){return y("event-title")&&y("event-pic")&&m("event-beginat")&&m("event-endat")&&function(){const e=document.getElementById("event-beginat"),t=document.getElementById("event-endat");let n=!0;return new Date(e.value)>new Date(t.value)?(t.setCustomValidity("종료시간은 시작시간 이후여야 합니다."),n=!1):t.setCustomValidity(""),t.reportValidity(),n}()&&y("event-location")&&function(){const e=document.getElementById("event-category");let t=!0;return"none"===e.value?(e.setCustomValidity("카테고리를 선택해주세요"),t=!1):e.setCustomValidity(""),e.reportValidity(),t}()&&y("event-topic")&&y("event-details")}function p(e){const t=new Date(e),n=t.getFullYear();let[o,i]=[t.getMonth()+1,t.getDate()];return o<10&&(o=`0${o}`),i<10&&(i=`0${i}`),`${n}-${o}-${i}`}function f(e){const t=new Date(e);let[n,o]=[t.getHours(),t.getMinutes()];return n<10&&(n=`0${n}`),o<10&&(o=`0${o}`),`${n}:${o}`}async function v(e){const t=e.target.classList[0];try{!function(e){const{title:t,personInCharge:n,location:o,category:i,topic:l,details:c}=e,a=`${p(new Date(e.beginAt).getTime())}T${f(new Date(e.beginAt).getTime())}`,r=`${p(new Date(e.endAt).getTime())}T${f(new Date(e.endAt).getTime())}`;document.getElementById("event-title").value=t,document.getElementById("event-pic").value=n,document.getElementById("event-beginat").value=a,document.getElementById("event-endat").value=r,document.getElementById("event-location").value=o,document.getElementById("event-category").value=i,document.getElementById("event-topic").value=l,document.getElementById("event-details").value=c,document.querySelector(".form-button-new").style.display="none",document.querySelector(".form-button-edit").style.display="block",document.querySelector(".layout-form").style.display="grid"}(await a.get(`/event/${t}`))}catch(e){window.location.replace("/event/list")}document.querySelector(".form-button-edit").addEventListener("click",(e=>{const n=new FormData(document.querySelector(".form"));!function(e,t){g()&&a.put(`/event/${e}`,t).then((()=>{r.fire({title:"수정이 완료되었습니다.",icon:"success"}).then((()=>window.location.replace("/event/list")))})).catch((e=>r.fire({title:"오류가 발생하였습니다.",icon:"error"})))}(t,n),e.target.removeEventListener("click",v)}))}function h(e,t){const n=new Date(new Date(e).setSeconds(0,0)),o=new Date(t),i=(new Date(o.getFullYear(),o.getMonth(),o.getDate(),n.getHours(),n.getMinutes())-n)/864e5;let l;return l=i>1?`for ${i+1} days`:1===i?"for 2 days":function(e,t){let n,o;const i=(t-e)/6e4,l=Math.floor(i/60);n=l>1?`${l} hours`:1===l?"1 hour":"";const c=i-60*l;return o=c>1?`${c} mins`:1===c?"1 min":"",`for ${n} ${o}`}(n,o),{duration:l,diffInDays:i}}function b(e,t,n){const o=["일","월","화","수","목","금","토"],i=new Date(e),l=new Date(t),[c,a,r,s,d,u]=[i.getFullYear(),i.getMonth()+1,i.getDate(),o[i.getDay()],i.getHours(),i.getMinutes()],[y,m,g,p,f,v]=[l.getFullYear(),l.getMonth()+1,l.getDate(),o[l.getDay()],l.getHours(),l.getMinutes()],h=d>9?d:`0${d}`,b=u>9?u:`0${u}`,w=f>9?f:`0${f}`,S=v>9?v:`0${v}`;return n>=1?`${c}년 ${a}월 ${r}일 (${s}) ${h}:${b} ~ ${y}년 ${m}월 ${g}일 (${p}) ${w}:${S}`:`${c}년 ${a}월 ${r}일 (${s}) ${h}:${b} ~ ${w}:${S}`}function w(e){const{id:t,title:n,personInCharge:o,beginAt:i,endAt:l,location:c,topic:a,details:r}=e,{diffInDays:s}=h(i,l);let d=`${n}\n\n주제: ${a}\n일시: ${b(i,l,s)}\n장소: ${c}`;o&&(d+=`\n발표자/담당자: ${o}`),r&&(d+=`\n\n${r}`);const u=`우리42벤트에서 확인하기 -> ${window.location.origin}/event/info/${t}`;document.querySelector(".layout-promotion").style.display="grid";const y=document.querySelector(".promotion-text");y.textContent=d,document.querySelector(".promotion-url-text").textContent=u,function(e){const t=e;t.style.height="1px",t.style.height=`${t.scrollHeight}px`}(y)}function S(e){const t=/https?:\/\//;let n;return e.replace(/(https?:\/\/(www\.)?)?[-a-zA-Z0-9@:%._+~#=]{2,256}\.[a-z]{2,4}\b([-a-zA-Z0-9@:%_+.~#?&//=]*)/g,(e=>(n=t.test(e)?"":"42seoul.io/cluster"===e?"http://":"https://",`<a class="details-anchor" href="${n+e}">${e}</a>`)))}async function x(){document.querySelectorAll("[class^=_eventId-]").forEach((e=>{const t=e.classList[0].substring(9),n=document.querySelector(".layout-details");e.addEventListener("click",(async()=>{await async function(e){const t=await async function(e){return await a.get(`/event/${e}`).catch((e=>{r.fire({title:"오류가 발생하였습니다.",icon:"error"}).then((()=>{throw e}))}))}(e),{title:n,personInCharge:o,beginAt:i,endAt:l,location:c,category:s,topic:d,details:u,isMyEvent:y,notification:m}=t;document.querySelector(".details-category").textContent=function(e){let t;switch(e){case"lecture":t="특강";break;case"exam":t="시험";break;case"contest":t="해커톤/공모전";break;case"conference":t="세미나/컨퍼런스";break;default:t="커뮤니티"}return t}(s),document.querySelector(".details-title").textContent=n;const{duration:g,diffInDays:p}=h(i,l);document.querySelector(".details-range").textContent=b(i,l,p),document.querySelector(".details-duration").innerHTML=`<i class="material-icons"> schedule</i>&nbsp;&nbsp;${g}`,document.querySelector(".details-location").innerHTML=`<i class="material-icons">room</i>&nbsp;${S(c)}`,function(e,t,n){const o=document.querySelector(".details-pic");""!==e&&null!==e?(o.innerHTML=`<span class="details-pic-label text-bold">발표자 / 담당자&nbsp;&nbsp;:</span>&nbsp;&nbsp;${e}`,o.style.display="flex"):(o.innerHTML="",o.style.display="none"),document.querySelector(".details-topic").innerHTML=`<div class="details-topic-label text-bold">주제</div><div class="details-topic-content">${t}</div>`;const i=document.querySelector(".details-details");""!==n&&null!==n?(i.innerHTML=`<div class="details-details-label text-bold">상세정보</div><div class="details-details-content">${S(n)}</div>`,i.style.display="flex"):(i.innerHTML="",i.style.display="none")}(o,d,u),function(e,t,n,o){const[i,l,c]=[new Date,new Date(e),new Date(t)],a=document.querySelector(".notification-button");if(i>c)return document.querySelectorAll(".notification-button > *").forEach((e=>{e.style.display="none"})),void(a.style.height="0px");a.style.height="",a.style.flexDirection="";const r=n?[".details-myevent-button",".details-cancel-button"]:[".details-cancel-button",".details-myevent-button"];if(document.querySelector(r[0]).style.display="none",document.querySelector(r[1]).style.display="block","serviceWorker"in navigator&&"PushManager"in window&&i<l){const e=document.querySelector(".details-notification-info");let t=[".details-notification-info","#details-notification"];n&&(t=["#details-notification",".details-notification-info"],e.textContent=i>l||null===o?"":0===o?"이벤트 시작 시간 알림":`이벤트 ${o}분 전 알림`),document.querySelector(t[0]).style.display="none",document.querySelector(t[1]).style.display="block"}else document.querySelector("#details-notification").style.display="none",document.querySelector(".details-notification-info").style.display="none",a.style.flexDirection="row-reverse"}(i,l,y,m),function(e,t){const n=document.querySelector(".details-exit-button"),o=document.querySelector(".details-share-button");n.addEventListener("click",(()=>{document.querySelector(".layout-details").style.display="none"})),o.addEventListener("click",(()=>{const n=e;n.id=t,n.beginAt=new Date(n.beginAt).toISOString(),n.endAt=new Date(n.endAt).toISOString(),w(n)}))}(t,e),document.getElementById("details-notification").value="none"}(t),[n.id]=e.classList,n.style.display="grid"}))}))}function $(e,t=[],n=null){const o=document.createElement(e);return t.forEach((e=>{e&&o.classList.add(e)})),n&&(o.textContent=n),o}!async function(){!function(){const e=document.querySelector("nav");window.innerWidth>1080?(document.querySelector(".layout").style.gridTemplateRows="70px 1fr 80px",e.classList.add("hidden")):document.querySelector(".layout").style.gridTemplateRows="70px 1fr 60px",window.addEventListener("resize",(()=>{window.innerWidth>1080?(document.querySelector(".layout").style.gridTemplateRows="70px 1fr 80px",e.classList.add("hidden")):document.querySelector(".layout").style.gridTemplateRows="70px 1fr 60px"}));const t=e.querySelector(".navbar-category"),n=e.querySelector(".toggle-divider"),o=e.querySelector(".navbar-tab-my");e.querySelector(".toggle-all-event").textContent="달력으로 돌아가기",o.parentElement.removeChild(o),n.style.display="none",t.style.display="none",document.querySelector(".main").style.height="calc(100vh - 70px)"}(),await async function(){const e=await async function(){return await a.get("/event/list/data").catch((e=>{throw window.location.replace("/error/500"),e}))||[]}();if(e.length){const t=p(new Date(Date.now()).getTime()),n=[];let o=null;e.forEach((e=>{!function(e,t){const n=p(new Date(t.beginAt).getTime()),o=Math.floor((new Date(t.endAt).setHours(0,0,0,0)-new Date(t.beginAt).setHours(0,0,0,0))/864e5);for(let t=0;t<=o;t+=1){const[o,i,l]=n.split("-"),c=p(new Date(o,Number(i)-1,Number(l)+t));e.includes(c)||e.push(c)}}(n,e)})),n.forEach((n=>{o=function(e){const t=document.querySelector(".eventlist").appendChild($("div",["eventlist-info"])),n=new Date(e).getDay(),[o,i,l]=e.split("-");return t.appendChild($("div",["info-date","large","text-bold"],` ${Number(i)}월 ${Number(l)}일 ${["일","월","화","수","목","금","토"][n]}요일, ${o}`)),t.appendChild($("hr",["date-divider"])),t}(n);const i=n.localeCompare(t)<0;e.forEach((e=>{(function(e,t,n){return e.localeCompare(p(new Date(t).getTime()))>=0&&e.localeCompare(p(new Date(n).getTime()))<=0})(n,e.beginAt,e.endAt)&&function(e,t,n){const o=`${p(t.beginAt).replaceAll("-","/").slice(5)}  ${f(t.beginAt)}`,i=`${p(t.endAt).replaceAll("-","/").slice(5)}  ${f(t.endAt)}`,l=e.appendChild($("div",!0===n?["eventlist-list","date-outdated"]:["eventlist-list"]));l.appendChild($("div",["list-category",`category-${t.category}`])),l.appendChild($("div",[`_eventId-${t.id}`,"list-content-title"],t.title)),l.appendChild($("div",["list-content-time"])).innerHTML=`<i class=material-icons-outlined>schedule</i> ${o} ~ ${i}`,l.appendChild($("div",["list-content-location"])).innerHTML=`<i class=material-icons-outlined>location_on</i>${t.location}`,l.appendChild($("div",["list-content-icon"])).innerHTML=`<label> <input class='${t.id} list-edit' type=button><i class=material-icons-outlined> edit_note </i></label><label> <input class='${t.id} list-delete' type=button><i class=material-icons-outlined> delete </i></label>`}(o,e,i)}))}))}else document.querySelector(".eventlist").appendChild($("div",["eventlist-no-content","xxlarge"],"생성한 이벤트가 없습니다."))}();const e=document.querySelector(".eventlist");e.scrollTo({top:0});const t=function(e){const t=e.querySelectorAll(".date-outdated");return t.length?t[t.length-1].getBoundingClientRect().bottom-e.getBoundingClientRect().top+40:0}(e);e.scrollTo({top:t}),function(e,t){!function(e,t){document.querySelector(".header-today-button").addEventListener("click",(()=>e.scrollTo({top:t,behavior:"smooth"})))}(e,t),function(e){e.querySelectorAll(".list-delete").forEach((e=>e.addEventListener("click",d)))}(e),function(e){e.querySelectorAll(".list-edit").forEach((e=>e.addEventListener("click",v)))}(e),x()}(e,t)}();const E=document.getElementById("details-notification");function q(e,t,n){const{category:o,id:i,isMulti:l,length:c,title:a}=e;if(-1===c?t.appendChild($("div",["month-label-empty"])):l?t.appendChild(D(i,o,a)):C(t,i,o,a),c>1){const e=document.querySelector(".calendar-month").offsetWidth/7,l=t.appendChild($("div",[`_eventId-${i}`,"month-label-multi","xsmall",o],a));l.style.width=""+(2*(e-5)+e*(c-2)-1),l.style.top=""+(20+24*n)}}function L(e){const{date:t,dateIndex:n,eventArray:o,moreEventDiv:i,isHoliday:l,noDays:c}=e;c-n-1<=7&&(i.style.bottom=0),n%7==6&&(i.style.right=0);const a=l?"sunday":null;i.appendChild($("div",["month-more-date","large","text-center",a],t));const r=i.appendChild($("div",["month-more-event"]));o.forEach((e=>{const{category:t,id:n,isMulti:o,length:i,title:l}=e;-1===i||o?r.appendChild(D(n,t,l)):C(r,n,t,l)}))}function C(e,t,n,o){e.appendChild($("div",[`_eventId-${t}`,"month-label-single","xsmall",n])).innerHTML=`<span class=single-category></span>${o}`}function D(e,t,n){return $("div",[`_eventId-${e}`,"month-label-end","xsmall",t],n)}function k(e){const t=Object.keys(e).map((e=>Number(e)));let n=0;for(;t.includes(n);)n+=1;return n}function T(e,t,n){const o=document.querySelectorAll(".month-date"),i={};o.forEach(((o,l)=>{!function(e,t,n,o){const{date:i,month:l}=t,c=t.isHoliday?"sunday":null,a=i!==o.getDate()||l!==o.getMonth()||n!==o.getFullYear()?"":"today-circle";e.appendChild($("div",["month-date-day","small",c])).innerHTML=`<span class="month-day-circle ${a} text-center">${i}</span>`}(o,e[l],n,new Date);const c=o.appendChild($("div",["month-date-events","select-none"]));(function(e,t,n,o){const i=document.querySelector(".month-date").offsetHeight-20,l=e[t].eventArray,c=e[t].slot,a=n;l.forEach(((l,r)=>{const s=l,{id:d,beginAt:u,endAt:y}=s;d in n||(a[`${d}`]=function(e,t,n){const[o,i]=[new Date(e).setHours(0,0,0,0),new Date(t).setHours(0,0,0,0)],l=n>new Date(e).getTime()?(i-n)/864e5+1:(i-o)/864e5+1;return{remainingDays:l,isMulti:l>1,isNextRow:!1}}(u,y,o)),s.isMulti=a[`${d}`].isMulti,s.length=function(e,t,n,o,i){const l=o,c=k(t);let a=l.remainingDays>=1?1:-1;return!Object.values(t).includes(i)&&e-24*(c+1)<22?l.remainingDays-=1:l.remainingDays>1&&(a=-1,n%7||(l.isNextRow=!1),l.isNextRow||(l.remainingDays<=7-n%7?(a=l.remainingDays,l.remainingDays=-1):(a=7-n%7,l.remainingDays-=a,l.isNextRow=!0))),a}(i,c,t,a[`${d}`],r),Object.values(c).includes(r)||function(e,t,n,o){const i=e,{id:l,length:c}=n,a=i[t].slot;if(c>1){const e=k(i[t].slot);for(let n=0;n<c&&t+n<i.length;n+=1){const{eventArray:o}=i[t+n],c=o.findIndex((e=>e.id===l));i[t+n].slot[`${e}`]=c}}else 1===c&&(a[`${k(a)}`]=o)}(e,t,s,r)})),function(e,t){const n=e[t],o=Object.keys(n.slot).map((e=>Number(e))),i=Math.max(...o);let l=0;for(;l+1<i;){for(;o.includes(l);)l+=1;n.slot[`${l}`]=-1,l+=1}}(e,t)})(e,l,i,t),function(e,t,n){const o=e[t],i=document.querySelector(".month-date").offsetHeight-20,{date:l,eventArray:c,slot:a}=o;for(const r in a){const s=a[`${r}`];if(-1===s)n.appendChild($("div",["month-label-empty"]));else{if(!(i-24*(Number(r)+1)>=22)){n.appendChild($("button",["month-more-button","xsmall","text-left"],c.length-Number(r)+" more")).type="button",L({date:l,dateIndex:t,eventArray:c,moreEventDiv:n.appendChild($("div",["month-more"])),isHoliday:o.isHoliday,noDays:e.length});break}q(c[s],n,Number(r))}}}(e,l,c)}))}async function A(){const e=document.querySelector(".calendar-month"),{yearParam:t,monthParam:n}=function(){let e=null,t=null;const n=sessionStorage.getItem("yearMonth");if(n)e=n.slice(0,4),t=n.substring(4);else{const n=new Date;e=n.getFullYear(),t=n.getMonth(),sessionStorage.setItem("yearMonth",`${e}${t}`)}return{yearParam:e,monthParam:t}}(),{dateEventArray:o,noWeeks:i,year:l,monthIndex:c}=await async function(e,t){return sessionStorage.getItem("isMyEvent")?await a.get(`/calendar/myEvent/month/${e}/${t}`).catch((e=>{throw window.location.replace("/error/500"),e})):await a.get(`/calendar/month/${e}/${t}`).catch((e=>{throw window.location.replace("/error/500"),e}))}(t,n),r=sessionStorage.getItem("categories").split("-").slice(1),s=1!==o[0].date?new Date(l,c-1,o[0].date).getTime():new Date(l,c,o[0].date).getTime();document.querySelectorAll(".month-date").forEach((e=>e.remove())),function(e,t){const n=document.querySelector(".title-calendar-year");document.querySelector(".title-calendar-month").textContent=`${t+1}월`,n.textContent=e}(l,c),function(e){e.innerHTML='<div class="day-title text-center">일</div><div class="day-title text-center">월</div><div class="day-title text-center">화</div><div class="day-title text-center">수</div><div class="day-title text-center">목</div><div class="day-title text-center">금</div><div class="day-title text-center">토</div>'}(e),function(e,t){const n=t;5===e?n.style.gridTemplate="20px repeat(5, calc(calc(100% - 20px) / 5)) / repeat(7, calc(100% / 7))":6===e?n.style.gridTemplate="20px repeat(6, calc(calc(100% - 20px) / 6)) / repeat(7, calc(100% / 7))":4===e&&(n.style.gridTemplate="20px repeat(4, calc(calc(100% - 20px) / 4)) / repeat(7, calc(100% / 7))");for(let t=0;t<7*e;t+=1){const e=$("div",["month-date"],null);n.appendChild(e)}n.style.borderLeft="var(--calendar_border) solid 1px",n.style.borderTop="var(--calendar_border) solid 1px"}(i,e);const d=function(e,t){const n=JSON.parse(e);return n.forEach((e=>{const n=e;n.eventArray=n.eventArray.filter((e=>t.includes(e.category)))})),n}(JSON.stringify(o),r);return T(d,s,l),u=d.flatMap((e=>e.eventArray)),document.querySelectorAll(".month-more-button").forEach((e=>{const t=e.parentElement.querySelector(".month-more");e.addEventListener("click",(()=>{t.style.display="grid"})),document.addEventListener("click",(n=>{n.target===e||t.contains(n.target)||(t.style.display="none")}))})),document.querySelectorAll(".month-label-multi, .month-label-end").forEach((e=>{document.querySelectorAll(`.${e.classList[0]}`).forEach((t=>{const n=t;e.addEventListener("pointerenter",(e=>{"touch"!==e.pointerType&&(n.style.boxShadow="1px 1px 1px var(--dark_grey)")})),e.addEventListener("pointerleave",(e=>{"touch"!==e.pointerType&&(n.style.boxShadow="none")}))}))})),function(e){document.querySelectorAll(".month-label-single, .month-label-multi, .month-label-end").forEach((t=>{t.addEventListener("pointermove",(n=>{if("touch"===n.pointerType)return;const o=document.querySelector(".beginat-svg");o&&o.remove();const{beginAt:i,isMulti:l}=e.find((e=>e.id===Number(t.classList[0].substring(9)))),c=new Date(new Date(i).getTime()+324e5).toISOString(),a=document.body.appendChild($("div",["beginat-svg"])),r=l?`${c.slice(5,7)}/${c.slice(8,10)} ${c.slice(11,16)}`:c.slice(11,16),s=l?68:40;a.innerHTML=`<svg width="${s}" height="23" viewBox="0 0 ${s} 23" fill="none"xmlns="http://www.w3.org/2000/svg"><rect x="${s}" y="22.0771" width="${s}" height="22"rx="3" transform="rotate(-180 ${s} 22.0771)" fill="black" fill-opacity="0.7"/><text x="8"y="14" fill="#fff" width="${s}" height="26" font-family="'Noto Sans KR', sans-serif" font-size="11">${r}</text></svg>`,a.style.left=""+(n.clientX-s+2),a.style.top=`${n.clientY+12+window.scrollY}`})),t.addEventListener("pointerleave",(e=>{if("touch"===e.pointerType)return;const t=document.querySelector(".beginat-svg");t&&t.remove()}))}))}(u),x(),[o,s,l];var u}E.addEventListener("pointermove",(e=>{if("touch"===e.pointerType||!E.disabled)return;const t=document.querySelector(".notification-alert-svg");t&&t.remove();const n=document.body.appendChild($("div",["notification-alert-svg"]));n.innerHTML='<svg width="130" height="23" viewBox="0 0 130 23" fill="none"xmlns="http://www.w3.org/2000/svg"><rect x="130" y="22.0771" width="130" height="22"rx="3" transform="rotate(-180 130 22.0771)" fill="black" fill-opacity="0.7"/><text x="8"y="14" fill="#fff" width="130" height="26" font-family="\'Noto Sans KR\', sans-serif" font-size="11">알림 설정이 꺼져있습니다</text></svg>',n.style.left=""+(e.clientX-134),n.style.top=`${e.clientY-28+window.scrollY}`})),E.addEventListener("pointerleave",(e=>{if("touch"===e.pointerType||!E.disabled)return;const t=document.querySelector(".notification-alert-svg");t&&t.remove()}));const I="/"===window.location.pathname?[A()]:[],M=document.querySelector(".details-myevent-button"),B=document.querySelector(".details-cancel-button"),H=document.querySelector(".notification-button");function N(e){const t="subscribe"===e?[M,B]:[B,M];t[0].style.display="none",t[1].style.display="block","/"===window.location.pathname&&sessionStorage.getItem("isMyEvent")&&(I[0]=A());const n=document.querySelector(".details-range").textContent.replace(/[^\d.-]/g," ").split(" ").filter((e=>""!==e)),o=new Date(n[0],n[1]-1,n[2],n[3],n[4]);if("serviceWorker"in navigator&&"PushManager"in window&&new Date<o){const t=document.querySelector(".details-notification-info"),n=document.querySelector("#details-notification"),o="subscribe"===e?[n,t]:[t,n];if("subscribe"===e){const{value:e}=n;t.textContent="none"===e?"":"0"===e?"이벤트 시작 시간 알림":`이벤트 ${e}분 전 알림`}o[0].style.display="none",o[1].style.display="block"}else document.querySelector("#details-notification").style.display="none",document.querySelector(".details-notification-info").style.display="none",H.style.flexDirection="row-reverse"}M.addEventListener("click",(async()=>{const e=document.getElementById("details-notification").value,t=document.querySelector(".layout-details").id.substring(9);a.post(`/event/myevent/${t}`,{notification:e}).then((e=>{r.fire({title:"이벤트가 구독되었습니다.",icon:"success"}).then((()=>N("subscribe")))})).catch((e=>r.fire({title:"오류가 발생하였습니다.",icon:"error"})))})),B.addEventListener("click",(()=>{const e=document.querySelector(".layout-details").id.substring(9);a.delete(`/event/myevent/${e}`).then((e=>{r.fire({title:"구독이 취소되었습니다.",icon:"warning"}).then((()=>N("unsubscribe")))})).catch((e=>r.fire({title:"오류가 발생하였습니다.",icon:"error"})))}));const R=document.getElementById("event-beginat"),V=document.getElementById("event-endat");function _(e){const t=e;t.style.border="none"===t.value?"2px solid red":"2px solid green",t.style.outline="none"}function F(e,t){const n=u(t.value),o=t;let i=!0;switch(e){case"event-title":case"event-location":(!n||n>224)&&(i=!1);break;case"event-pic":n>56&&(i=!1);break;case"event-topic":(!n||n>480)&&(i=!1);break;default:n>4064&&(i=!1)}o.style.border=i?"2px solid green":"2px solid red","event-topic"!==e&&"event-details"!==e||(o.style.outline="none")}function O(e,t){const n=e;""!==n.value&&function(e){const t=new Date("1970-01-01T00:00"),n=new Date("4242-12-31T23:59"),o=new Date(e);return o>=t&&o<=n}(n.value)&&(""===t.value||function(){const e=document.getElementById("event-beginat").value,t=document.getElementById("event-endat").value;return new Date(e)<=new Date(t)}())?n.style.border="2px solid green":n.style.border="2px solid red"}R.addEventListener("click",(function(){""!==V.value&&(R.max=V.value)})),V.addEventListener("click",(function(){""!==R.value&&(V.min=R.value)})),document.querySelector(".form-button-new").addEventListener("click",(function(){if(g()){const e=document.querySelector(".form"),t=new FormData(e);a.post("/event",t).then((t=>{s.fire({title:"이벤트가 생성되었습니다.",icon:"success",confirmButtonText:"홍보글 생성",cancelButtonText:"닫기"}).then((n=>{n.isConfirmed?(e.reset(),e.parentNode.style.display="none",w(t)):window.location.replace(window.location.pathname)}))})).catch((e=>{r.fire({title:"오류가 발생하였습니다.",icon:"error"})}))}})),document.querySelectorAll(".create-event-button").forEach((e=>{e.addEventListener("click",(()=>{document.querySelector(".layout-form").style.display="grid",document.querySelector(".form-button-new").style.display="block",document.querySelector(".form-button-edit").style.display="none"}))})),document.querySelector(".form-button-exit").addEventListener("click",(()=>{document.querySelector(".layout-form").style.display="none"})),document.querySelector(".promotion-exit-button").addEventListener("click",(()=>{document.querySelector(".layout-promotion").style.display="none"})),document.querySelector(".promotion-copy-button").addEventListener("click",(()=>{const e=document.querySelector(".promotion-text"),t=document.querySelector(".promotion-url-text").textContent,n=e.textContent;e.textContent=`${n}\n\n${t}`,e.select(),document.execCommand("copy"),e.textContent=n,r.fire({title:"복사되었습니다.",icon:"success"})})),["event-title","event-pic","event-location","event-topic","event-details"].forEach((e=>function(e){const t=document.getElementById(e);t.addEventListener("focusin",(()=>{F(e,t),t.addEventListener("keyup",(()=>F(e,t)))})),t.addEventListener("focusout",(()=>{t.style.border="none"}))}(e))),function(){const e=document.getElementById("event-beginat"),t=document.getElementById("event-endat");e.addEventListener("change",(()=>{O(e,t),setTimeout((()=>{e.style.border="none"}),2e3)})),t.addEventListener("change",(()=>{O(t,e),setTimeout((()=>{t.style.border="none"}),2e3)})),e.addEventListener("invalid",(()=>O(e,t))),t.addEventListener("invalid",(()=>O(t,e))),e.addEventListener("blur",(()=>{"2px solid red"===e.style.border&&setTimeout((()=>{e.style.border="none"}),1e3)})),t.addEventListener("blur",(()=>{"2px solid red"===t.style.border&&setTimeout((()=>{t.style.border="none"}),1e3)}))}(),function(){const e=document.getElementById("event-category");e.addEventListener("change",(()=>{_(e),setTimeout((()=>{e.style.border="none"}),2e3)})),e.addEventListener("invalid",(()=>_(e))),e.addEventListener("blur",(()=>{"2px solid red"===e.style.border&&setTimeout((()=>{e.style.border="none"}),1e3)}))}();const Y=document.querySelector(".header-today-button");function P(e){const t=(e+"=".repeat((4-e.length%4)%4)).replace(/-/g,"+").replace(/_/g,"/"),n=window.atob(t),o=new Uint8Array(n.length);for(let e=0;e<n.length;e+=1)o[e]=n.charCodeAt(e);return o}async function W(e){return await navigator.serviceWorker.ready,await e.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:P("BM9QjkyqV9IiwOfuXXIwmq-oteF3ZJQu_vQXyPC-w4FGud6CXxhbFU0SRlCQJfEg9IhDfLXi9x6MzzP4nogUOQE")}),await e.pushManager.getSubscription()}0===navigator.maxTouchPoints&&(Y.addEventListener("mousemove",(e=>{const t=document.querySelector(".today-svg");t&&t.remove();const n=new Date,o=document.body.appendChild($("div",["today-svg"]));o.innerHTML=`<svg width="109" height="23" viewBox="0 0 109 23" fill="none"xmlns="http://www.w3.org/2000/svg"><rect x="109" y="22.0771" width="109" height="22"rx="3" transform="rotate(-180 109 22.0771)" fill="black" fill-opacity="0.7"/><text x="8"y="15" fill="#fff" width="109" height="26" font-family="'Noto Sans KR', sans-serif" font-size="11">오늘, ${n.getFullYear()}년 ${n.getMonth()+1}월  ${n.getDate()}일</text></svg>`,o.style.left=""+(e.clientX-109+2),o.style.top=`${e.clientY+12+window.scrollY}`})),Y.addEventListener("mouseleave",(()=>{const e=document.querySelector(".today-svg");e&&e.remove()}))),"serviceWorker"in navigator&&"PushManager"in window?function(){const e=document.querySelectorAll(".notification-switch"),t=document.querySelectorAll(".notification-switch input");!async function(e){const t=await navigator.serviceWorker.getRegistration();if(t){const n=document.querySelector("#details-notification");if(await t.ready,await t.pushManager.getSubscription()){const o=document.cookie.split(";").find((e=>e.includes("pushToken=")));let i=!0;if(!o){const o=await W(t);await a.post("/push",{subscription:o,isFirst:!1}).catch((t=>{if(403===t.response.status){e.forEach((e=>{const t=e.parentElement.lastElementChild;e.checked=!1,t.style.display="block"})),n.disabled=!0;const t=sessionStorage.getItem("subBlocked");t&&"true"===t||r.fire({text:"브라우저/기기 환경당 한 사용자만 알림 설정을 킬 수 있습니다. 만약 본인의 기기/브라우저 환경에서 이 알림이 떴다면 our42vent@gmail.com 으로 문의하세요.",icon:"warning"}),sessionStorage.setItem("subBlocked","true")}i=!1}))}i&&(e.forEach((e=>{e.checked=!0})),n.disabled=!1)}else n.disabled=!0}}(t),e.forEach((e=>e.addEventListener("click",(n=>{const o=e.querySelector(".notification-switch-blocker");if(n.target!==o){const n=e.firstElementChild.checked;t[0].checked=!n,t[1].checked=!n,o.style.display="block",async function(e){const t=document.querySelector("#details-notification");if(e){const e=await Notification.requestPermission();if("granted"!==e){const t=new Error;throw t.permission=e,t}const n=await navigator.serviceWorker.register("/serviceWorker.js",{scope:"/"}),o=await W(n);await a.post("/push",{subscription:o,isFirst:!0}),t.disabled=!1}else{const e=await navigator.serviceWorker.getRegistration(),n=await e.pushManager.getSubscription();await n.unsubscribe(),await a.delete("/push",{data:n}),t.disabled=!0}}(!n).then((()=>{o.style.display="none"})).catch((n=>{const o=e.querySelector(".notification-switch-blocker");t[0].checked=!1,t[1].checked=!1,"denied"===n.permission?o.addEventListener("click",(()=>r.fire({text:"우리42벤트 사이트 알림 설정이 차단되어 있습니다. 브라우저 설정에서 차단을 해제해주세요.",icon:"warning"}))):o.style.display="none",document.querySelector("#details-notification").disabled=!0}))}}))))}():document.querySelectorAll(".notification-wrapper").forEach((e=>{e.style.display="none"}))})();